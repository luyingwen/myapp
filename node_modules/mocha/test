var app = require("../../app")
var request = require("request");
var chai = require('chai');

describe("Test API", function(){
	describe("Get User Schema", function() {
		var url = "http://localhost:3000/user?userName=driver"
	    it("Get User Information", function() {
	    	request(url, function(error, response, body) {
	    		expect(response).to.equal('[{"_id":"58aa073507a47f50cfa30f77","userName":"driver","email":"new@myapp.com","createDate":"2017-02-19T20:59:33.365Z","__v":0,"friends":[]}]');
	    	})
		});
		it("Can't find user in db", function() {
			request(url, function(error, response, body) {
	    		expect(response).to.equal('No user in db');
	    	})
		})
	});
	describe("Put User Schema", function() {
		var url = "http://localhost:3000/user"
	    it("Get User Information", function() {
	    	var update = {
	    		"userName": "worker",
				"email": "worker@email.com",
				"password": "567890"
	    	}
	    	chai.request(app)
	    		.post('/user')
	    		.send(update)
	    		.end(function(err, res){
	    			res.should.have.status(200);
	    			//res.body.should.equal('Create a new user successfull');
	    			//expect(res).to.equal('Create a new user successfully');
	    			
	    		})
	    	// request(url, function(error, response, body) {
	    	// 	expect(response).to.equal('[{"_id":"58aa073507a47f50cfa30f77","userName":"driver","email":"new@myapp.com","createDate":"2017-02-19T20:59:33.365Z","__v":0,"friends":[]}]');
	    	// })
		});
	});

});